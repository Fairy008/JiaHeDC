<style>
    .timeRang{
        float: left;
    }
    table.dataintable {
        margin-top:15px;
        border-collapse:collapse;
        border:1px solid #efefef;
        width:100%;
    }
    table.dataintable th {
        vertical-align:baseline;
        background-color:#1f4350;
        border:1px solid #efefef;
        text-align:left;
        color:#fff;
        font-style: normal;
        line-height: 27px;
    }
    table.dataintable td {
        vertical-align:text-top;
    }
    table.dataintable tr:nth-child(odd) {
        background-color:#F5F5F5;
    }
    table.dataintable tr:nth-child(even) {
        background-color:#fff;
    }
    .inputType{
        width: 96.5% !important;
        padding-left: 5px;
        padding-right: 5px;
    }
    .inputType1{
        width: 98% !important;
    padding-left: 5px;
    height: 28px;
    line-height: 28px;
    color: #0b0b0b;
    border-radius: 5px;
    border: 1px solid rgb(212, 212, 212);
    outline: none;
    padding-right: 5px;
    }
    .inputType2{
        width: 93% !important;
    padding-left: 5px;
    height: 28px;
    line-height: 28px;
    color: #0b0b0b;
    border-radius: 5px;
    border: 1px solid rgb(212, 212, 212);
    outline: none;
    padding-right: 5px;
    }
    .inputType3{
        width: 93% !important;
    padding-left: 5px;
    height: 28px;
    line-height: 28px;
    color: #0b0b0b;
    border-radius: 5px;
    border: 1px solid rgb(212, 212, 212);
    outline: none;
    padding-right: 5px;
    }
    .inputType4{
        width: 99% !important;
    padding-left: 5px;
    height: 28px;
    line-height: 28px;
    color: #0b0b0b;
    border-radius: 5px;
    border: 1px solid rgb(212, 212, 212);
    outline: none;
    padding-right: 5px;
    }
    .inputType5{
        width: 97% !important;
    padding-left: 5px;
    height: 28px;
    line-height: 28px;
    color: #0b0b0b;
    border-radius: 5px;
    border: 1px solid rgb(212, 212, 212);
    outline: none;
    padding-right: 5px;
    }
    .inputType6{
        width: 97% !important;
    padding-left: 5px;
    height: 28px;
    line-height: 28px;
    color: #0b0b0b;
    border-radius: 5px;
    border: 1px solid rgb(212, 212, 212);
    outline: none;
    padding-right: 5px; 
    }
    .inputType7{
        width: 98% !important;
    padding-left: 5px;
    height: 28px;
    line-height: 28px;
    color: #0b0b0b;
    border-radius: 5px;
    border: 1px solid rgb(212, 212, 212);
    outline: none;
    padding-right: 5px; 
    }
</style>
<div class="content">
    <div class="searchItems">
        <div class="searchRow">
            <div class="searchBGleft" >
                <div>
                    <span class="label">区域：</span>
                    <span>
                        <input type="text" id="txtArea" class="input"  placeholder="请选择区域" readonly/>
                    </span>
                </div>
                <div>
                    <span class="label">作物：</span>
                    <span>
                        <select id = "cropId" class="input" style="width:120px;text-align:center;">
                           <option value="">--请选择--</option>
                        </select>
                    </span>
                </div>
                <div>
                    <span class="label">生育期名称：</span>
                    <span>
                        <input id="search_growthName" type="text" class="input" />
                    </span>
                </div>
            </div>
            <div class="searchBGright">
                <input type="button" class="btn " value="查询" id="queryBtn" />
                <input type="button" class="btn " id="resetBtn" value="重置" />
                <input name="Input" type="button" class="btn " id="addBtn" value="新增" />
            </div>
        </div>
    </div>
    <div class="grid">
        <table id="cropsGrowthPriodGrid"></table>
        <div id="pager2"></div>
    </div>

    <div id="dataTypeInfo" class="form" style="display: none;">
        <div class="ui-dialog-titlebar ui-corner-all ui-widget-header ui-helper-clearfix ui-draggable-handle">
            <span id="ui-id-1" class="ui-dialog-title">生育期配置</span>
        </div>
        <div>
            <table>
                <tr>
                    <td class="four_td1"><span class="txtRequired">*</span>区域:</td>
                    <td class="four_td2">
                        <input type="text" id="region" class="inputType"  placeholder="请选择区域" readonly/>
                    </td>
                    <td class="four_td1"><span class="txtRequired">*</span>作物:</td>
                    <td class="four_td2">
                        <select id="cropsId" name="cropsId" class="selectType two_selectType">
                            <option value="">--请选择--</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td class="four_td1"><span class="txtRequired">*</span>生育期名称:</td>
                    <td class="four_td2">
                        <select id="growthName"  name="growthName" class="selectType two_selectType timeRang" >
                            <option value="">--请选择--</option>
                        </select>
                    </td>
                    <td class="four_td1"><span class="txtRequired">*</span>是否播种期:</td>
                    <td class="four_td2">
                        <select id="ifGrowthStart" class="selectType two_selectType">
                            <option value="0" selected="selected">否</option>
                            <option value="1" >是</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td class="four_td1"><span class="txtRequired">*</span>开始时间:</td>
                    <td class="four_td2">
                        <select id="rangeStartMonth"  name="rangeStartMonth" class="selectType two_selectType timeRang" style="width:45%">
                             <option value="01">01月</option>
                             <option value="02">02月</option>
                             <option value="03">03月</option>
                             <option value="04">04月</option>
                             <option value="05">05月</option>
                             <option value="06">06月</option>
                             <option value="07">07月</option>
                             <option value="08">08月</option>
                             <option value="09">09月</option>
                             <option value="10">10月</option>
                             <option value="11">11月</option>
                             <option value="12">12月</option>
                        </select>
                        <select id="rangeStartDay" name="rangeStartDay" class="selectType two_selectType timeRang" style="width:45%">
                            <option value="01">01日</option>
                            <option value="02">02日</option>
                            <option value="03">03日</option>
                            <option value="04">04日</option>
                            <option value="05">05日</option>
                            <option value="06">06日</option>
                            <option value="07">07日</option>
                            <option value="08">08日</option>
                            <option value="09">09日</option>
                            <option value="10">10日</option>
                            <option value="11">11日</option>
                            <option value="12">12日</option>
                            <option value="13">13日</option>
                            <option value="14">14日</option>
                            <option value="15">15日</option>
                            <option value="16">16日</option>
                            <option value="17">17日</option>
                            <option value="18">18日</option>
                            <option value="19">19日</option>
                            <option value="20">20日</option>
                            <option value="21">21日</option>
                            <option value="22">22日</option>
                            <option value="23">23日</option>
                            <option value="24">24日</option>
                            <option value="25">25日</option>
                            <option value="26">26日</option>
                            <option value="27">27日</option>
                            <option value="28">28日</option>
                            <option value="29">29日</option>
                            <option value="30">30日</option>
                            <option value="31">31日</option>
                        </select>
                    </td>
                    <td class="four_td1"><span class="txtRequired">*</span>结束时间:</td>
                    <td class="four_td2">
                        <select id="rangeEndMonth"  name="rangeEndMonth" class="selectType two_selectType timeRang" style="width:45%">
                            <option value="01">01月</option>
                            <option value="02">02月</option>
                            <option value="03">03月</option>
                            <option value="04">04月</option>
                            <option value="05">05月</option>
                            <option value="06">06月</option>
                            <option value="07">07月</option>
                            <option value="08">08月</option>
                            <option value="09">09月</option>
                            <option value="10">10月</option>
                            <option value="11">11月</option>
                            <option value="12">12月</option>
                        </select>
                        <select id="rangeEndDay" name="rangeEndDay" class="selectType two_selectType timeRang" style="width:45%">
                            <option value="01">01日</option>
                            <option value="02">02日</option>
                            <option value="03">03日</option>
                            <option value="04">04日</option>
                            <option value="05">05日</option>
                            <option value="06">06日</option>
                            <option value="07">07日</option>
                            <option value="08">08日</option>
                            <option value="09">09日</option>
                            <option value="10">10日</option>
                            <option value="11">11日</option>
                            <option value="12">12日</option>
                            <option value="13">13日</option>
                            <option value="14">14日</option>
                            <option value="15">15日</option>
                            <option value="16">16日</option>
                            <option value="17">17日</option>
                            <option value="18">18日</option>
                            <option value="19">19日</option>
                            <option value="20">20日</option>
                            <option value="21">21日</option>
                            <option value="22">22日</option>
                            <option value="23">23日</option>
                            <option value="24">24日</option>
                            <option value="25">25日</option>
                            <option value="26">26日</option>
                            <option value="27">27日</option>
                            <option value="28">28日</option>
                            <option value="29">29日</option>
                            <option value="30">30日</option>
                            <option value="31">31日</option>
                        </select>
                    </td>
                </tr>
                <tr style="display: none;">
                    <td class="four_td1"><span class="txtRequired">*</span>是否跨年:</td>
                    <td class="four_td2">
                        <select id="ifspan" class="selectType two_selectType" disabled="disabled" style="background-color: #EEEEEE">
                            <option value="0" selected="selected">否</option>
                            <option value="1" >是</option>
                        </select>
                    </td>
                    <td class="four_td1"><span></span>序号:</td>
                    <td class="four_td2">
                        <input name="indexNo" id="indexNo" class="inputType" value="1" type="text" />
                    </td>
                </tr>
                <!--<tr>
                    <td class="four_td1"><span class="txtRequired">*</span>是否应用于下级行政区:</td>
                    <td class="four_td2">
                        <select id="ifCurrent" class="selectType two_selectType" disabled="disabled" style="background-color: #EEEEEE">
                            <option value="0">否</option>
                            <option value="1" selected="selected">是</option>
                        </select>
                    </td>
                </tr>-->
            </table>
        </div>
        <div id="showError" style="margin-bottom: 10px;">
        </div>
        <div class="ui-dialog-titlebar ui-corner-all ui-widget-header ui-helper-clearfix ui-draggable-handle" style="margin-bottom:10px;">
            <span id="ui-id-2" class="ui-dialog-title">病害配置</span>
        </div>
        <div id="diseaseDiv">
            <table class="dataintable">
                <tr><th style="width: 35%;text-align:center;">病害名称</th><th style="width: 62%;text-align:center;">防治措施</th><th style="width: 3%;text-align:center;"> <img src="images/public/addrow.png"  id="addTr1" style='margin-top: 2px;'></th></tr>
                <!--tr>
                    <td style="width: 30%"></td>
                    <td style="width: 60%"></td>
                    <td style="width: 10%;text-align:center;"><img src="images/public/addrow.png"  id="addTr1" style='margin-top: 2px;'></td>
                </tr>-->
                <tbody id="paramsList1">
                </tbody>
            </table>
        </div>
        <div class="ui-dialog-titlebar ui-corner-all ui-widget-header ui-helper-clearfix ui-draggable-handle" style="margin-bottom:10px;margin-top:10px;">
            <span id="ui-id-4" class="ui-dialog-title">虫害配置</span>
        </div>
        <div id="bugDiseaseDiv">
            <table class="dataintable">
                <tr><th style="width: 35%;text-align:center;">虫害名称</th><th style="width: 62%;text-align:center;">防治措施</th><th style="width: 3%;text-align:center;"> <img src="images/public/addrow.png"  id="addTr2" style='margin-top: 2px;'></th></tr>
                <!--<tr>
                    <td style="width: 30%"></td>
                    <td style="width: 60%"></td>
                    <td style="width: 10%;text-align:center;"><img src="images/public/addrow.png"  id="addTr2" style='margin-top: 2px;'></td>
                </tr>-->
                <tbody id="paramsList2">
                </tbody>
            </table>
        </div>
        <div class="ui-dialog-titlebar ui-corner-all ui-widget-header ui-helper-clearfix ui-draggable-handle" style="margin-bottom:10px;margin-top:10px;">
            <span id="ui-id-5" class="ui-dialog-title">生育期与地温配置</span>
        </div>
        <div id="conditionDiv">
            <table class="dataintable">
                <tr><th style="width: 18%;text-align:center;">开始范围</th><th style="width: 18%;text-align:center;">结束范围</th><th style="width: 16%;text-align:center;">是否均值</th><th style="width: 45%;text-align:center;">说明</th><th style="width: 3%;text-align:center;"><img src="images/public/addrow.png"  id="addTr3" style='margin-top: 2px;;text-align:center;'> </th></tr>
                <!--<tr>
                    <td style="width: 15%"></td>
                    <td style="width: 15%"></td>
                    <td style="width: 15%"></td>
                    <td style="width: 45%"></td>
                    <td style="width: 10%;text-align:center;"><img src="images/public/addrow.png"  id="addTr3" style='margin-top: 2px;;text-align:center;'></td>
                </tr>-->
                <tbody id="paramsList3">
                </tbody>
            </table>
        </div>
        <div class="ui-dialog-titlebar ui-corner-all ui-widget-header ui-helper-clearfix ui-draggable-handle" style="margin-bottom:10px;margin-top:10px;">
            <span  class="ui-dialog-title">备注</span>
        </div>
        <div style="margin-top:10px;">
            <!--<span>备注:</span>-->
            <span>
                <textarea name="remark" id="remark" class="inputType" style="width:100%;height: 123px;"></textarea>
            </span>
        </div>
    </div>

    <div id="showDetailDialog" class="form" style="display: none;">
        <div class="ui-dialog-titlebar ui-corner-all ui-widget-header ui-helper-clearfix ui-draggable-handle">
            <span id="ui-id-3" class="ui-dialog-title">生育期配置</span>
        </div>
        <div>
            <table>
                <tr>
                    <td class="four_td1">区域:</td>
                    <td class="four_td2">
                        <span id="region_V"></span>
                    </td>
                    <td class="four_td1">作物:</td>
                    <td class="four_td2">
                        <span id="cropsId_V"></span>
                    </td>
                </tr>
                <tr>
                    <td class="four_td1">生育期名称:</td>
                    <td class="four_td2">
                        <span id="growthName_V"></span>
                    </td>
                    <td class="four_td1">是否播种期:</td>
                    <td class="four_td2">
                        <span id="ifGrowthStart_V"></span>
                    </td>
                </tr>
                <tr>
                    <td class="four_td1">开始时间:</td>
                    <td class="four_td2">
                        <span id="rangeStart_V"></span>
                    </td>
                    <td class="four_td1">结束时间:</td>
                    <td class="four_td2">
                        <span id="rangeEnd_V"></span>
                    </td>
                </tr>
                <!--<tr>
                    <td class="four_td1">是否跨年:</td>
                    <td class="four_td2">
                        <span id="ifspan_V"></span>
                    </td>
                    <td class="four_td1">是否播种期:</td>
                    <td class="four_td2">
                        <span id="ifGrowthStart_V"></span>
                    </td>
                </tr>-->
                <!--<tr>
                    <td class="four_td1">是否应用于下级行政区:</td>
                    <td class="four_td2">
                        <span id="isCurrent_V"></span>
                    </td>
                </tr>-->
                <!--<tr>
                    <td class="four_td1">备注:</td>
                    <td class="four_td2" colspan="3">
                        <div id="remark_V">
                        </div>
                    </td>
                </tr>-->
            </table>
        </div>
        <div class="ui-dialog-titlebar ui-corner-all ui-widget-header ui-helper-clearfix ui-draggable-handle" style="margin-bottom:10px;">
            <span id="ui-id-22" class="ui-dialog-title">病害配置</span>
        </div>
        <div>
            <table class="dataintable">
                <tr><th style="width: 30%;text-align:center;">病害名称</th><th style="width: 70%;text-align:center;">防治措施</th></tr>
                <tbody id="paramsListV1">
                </tbody>
            </table>
        </div>
        <div class="ui-dialog-titlebar ui-corner-all ui-widget-header ui-helper-clearfix ui-draggable-handle" style="margin-bottom:10px;margin-top:10px;">
            <span id="ui-id-44" class="ui-dialog-title">虫害配置</span>
        </div>
        <div>
            <table class="dataintable">
                <tr><th style="width: 30%;text-align:center;">虫害名称</th><th style="width: 70%;text-align:center;">防治措施</th></tr>
                <tbody id="paramsListV2">
                </tbody>
            </table>
        </div>
        <div class="ui-dialog-titlebar ui-corner-all ui-widget-header ui-helper-clearfix ui-draggable-handle" style="margin-bottom:10px;margin-top:10px;">
            <span id="ui-id-55" class="ui-dialog-title">生育期与地温配置</span>
        </div>
        <div>
            <table class="dataintable">
                <tr><th style="width: 15%;text-align:center;">开始范围</th><th style="width: 15%;text-align:center;">结束范围</th><th style="width: 15%;text-align:center;">是否均值</th><th style="width: 55%;text-align:center;">说明</th></tr>
                <tbody id="paramsListV3">
                </tbody>
            </table>
        </div>
        <div class="ui-dialog-titlebar ui-corner-all ui-widget-header ui-helper-clearfix ui-draggable-handle" style="margin-bottom:10px;margin-top:10px;">
            <span  class="ui-dialog-title">备注</span>
        </div>
        <div style="margin-top:10px;">
        <!--<span>备注:</span>-->
            <span id="remark_V"></span>
        </div>
    </div>

    <div id="confirmDialog" class="dialogStyle" style="display:none">
    </div>

</div>
    <script>
        require(["jquery", "jqGrid", "BaseAjax", "formVerfication","PopWin","commons","multiselect","RegionModule"], function ($, jqGrid, BaseAjax, formVerfication,PopWin,commons,multiselect,RegionModule) {

            /*
             * 初始化
             */
            var init = function(){
                //区域点击事件
                RegionSelectFun("txtArea","cropId");
                cropsGrowthPriodGrid();
                $("#addBtn").bind("click",addFun);
                $("#queryBtn").bind("click",searchFun);
                $("#resetBtn").on("click",resetFun);

                $(window).resize(function(){
                    $("#cropsGrowthPriodGrid").setGridWidth($(".rightMain").width() - 30);
                    chanageTableCss();
                });
                chanageTableCss();
            };

            /**
             * 重置
             * @version<1> 2018-06-21 cxw :created.
             */
            var resetFun = function(){
                $(".input").val("");
                $("#txtArea").removeAttr("regionid");
                $('#cropId').html('<option value="">--请选择--</option>');
            }

            /**
             * 物候期与地温关系动态添加行
             * @version <1> 2018-05-22 lxy： Created.
             */
            var addGrowthRelative=function(index){
                var tables = $('#paramsList'+index);
                var row = $("<tr class='paramsTr'>"+
                        "<td><input type='text' name='tempRangeStart' class='inputType2'  /></td>"+
                        "<td><input type='text' name='tempRangeEnd' class='inputType3'/></td>"+
                        "<td><select name='ifavg' class='inputType4'><option value='1' selected='selected'>是</option><option value='0' >否</option></select></td>"+
                        "<td><input type='text' name='instruction' class='inputType5'  /></td>"+
                        "<td style='text-align:center;'><img src='images/public/reduce.png' class='removeTr' style='margin-top: 2px;' ></td>"+
                        "</tr>");
                row.appendTo(tables);
                $(".removeTr").click(function(){//点击动态移除一行
                    $(this).parent().parent().remove();
                });
            };

            /**
             * 病虫害动态添加
             * @param index 索引
             * @version <1> 2018-05-21 lxy： Created.
             */
            var addBugDiseaseRow=function(index){
                var tables = $('#paramsList'+index);
                var row = $("<tr class='paramsTr'>"+
                        "<td><input type='text' name='diseaseName' class='inputType'  /></td>"+
                        "<td><input type='text' name='diseaseMeasure' class='inputType1'/></td>"+
                        "<td style='text-align:center;'><img src='images/public/reduce.png' class='removeTr' style='margin-top: 2px;' ></td>"+
                        "</tr>");
                row.appendTo(tables);
                $(".removeTr").click(function(){//点击动态移除一行
                    $(this).parent().parent().remove();
                });
            };

            /**
             * 点击编辑或者新增按钮时
             * 先清空原本的弹出框算法参数信息，并移除除了第一行之外的
             * @param index 索引
             * @version <1> 2018-05-21 lxy：Created.
             */
            var showTr=function(index){
                //对话框弹打开后，就是可以删除了。
                $(".removeTr").click(function(){//点击动态移除一行
                    $(this).parent().parent().remove();
                });
                //除了算法参数的第一行其余的清除 并清除第一行数据
                $("#paramsList"+index+" tr").remove();
                $("#paramsList"+index+" tr input").val("");//清空
                $("#paramsList"+index+" tr select").find("option[value='1']").attr("selected",true);//初始化select框
                //绑定增加行事件
                $("#addTr"+index).bind("click",function () {
                    if(index<3)
                        addBugDiseaseRow(index);//病虫害
                    else
                        addGrowthRelative(index);//地温条件
                });
            };

            /**
             * 封装所有数据
             * @version <1> 2018-05-21 lxy：Created.
             */
            var wrapEachTrValues = function(){
                var growthData = {};
                var diseases = [];//装载病虫害病虫害容器
                //获取病害配置
                $("#paramsList1").find("tr").each(function(){
                    var tdArr = $(this).children();
                    var diseaseName = tdArr.eq(0).find("input").val();//病虫害名称
                    var diseaseMeasure = tdArr.eq(1).find("input").val();//病虫害防治措施
                    if(diseaseName!="" || diseaseMeasure!=""){
                        var disease = {'diseaseName':diseaseName,'diseaseMeasure':diseaseMeasure,'diseaseType':1};
                        diseases.push(disease);//添加病虫害
                    }
                });

                //获取虫害配置
                $("#paramsList2").find("tr").each(function(){
                    var tdArr = $(this).children();
                    var diseaseName = tdArr.eq(0).find("input").val();//病虫害名称
                    var diseaseMeasure = tdArr.eq(1).find("input").val();//病虫害防治措施
                    if(diseaseName!="" || diseaseMeasure!=""){
                        var disease = {'diseaseName':diseaseName,'diseaseMeasure':diseaseMeasure,'diseaseType':2};
                        diseases.push(disease);//添加病虫害
                    }
                });

                var growthConditions=[];//装载地温条件容器
                //获取地温条件
                $("#paramsList3").find("tr").each(function(){
                    var tdArr = $(this).children();
                    var tempRangeStart = tdArr.eq(0).find("input").val();//开始范围
                    var tempRangeEnd = tdArr.eq(1).find("input").val();//结束范围
                    var ifavg = tdArr.eq(2).find("select").val();//是否均值
                    var instruction = tdArr.eq(3).find("input").val();//条件说明
                    if(tempRangeStart != "" || tempRangeEnd != "" || instruction != ""){
                        var growthCondition = {'tempRangeStart':tempRangeStart,'tempRangeEnd':tempRangeEnd,'ifavg':ifavg,'instruction':instruction};
                        growthConditions.push(growthCondition);//添加地温条件
                    }
                });
                growthData["diseases"]=diseases;//病虫害数据
                growthData["growthConditions"]=growthConditions;//地温条件
                return growthData;
            };

            //修改时候填充所有数据
            var initEachTrValues = function (growthData) {
                var diseases = growthData.diseases;//病害
                var diseasesTable = $('#paramsList1');//病害表
                diseasesTable.html("");
                $(diseases).each(function(i,disease){
                    var row = $("<tr class='paramsTr'>"+
                            "<td><input type='text' name='diseaseName' class='inputType6'  value='"+disease.diseaseName+"'/></td>"+
                            "<td><input type='text' name='diseaseMeasure' class='inputType7' value='"+disease.diseaseMeasure+"'/></td>"+
                            "<td style='text-align:center;'><img src='images/public/reduce.png' class='removeTr' style='margin-top: 2px;' ></td>"+
                            "</tr>");
                    row.appendTo(diseasesTable);
                    $(".removeTr").click(function(){//点击动态移除一行
                        $(this).parent().parent().remove();
                    });
                });

                var bugDiseases = growthData.bugDiseases;//虫害
                var bugDiseasesTable = $('#paramsList2');//虫害表
                bugDiseasesTable.html("");
                $(bugDiseases).each(function(i,disease){
                    var row = $("<tr class='paramsTr'>"+
                            "<td><input type='text' name='diseaseName' class='inputType6'  value='"+disease.diseaseName+"'/></td>"+
                            "<td><input type='text' name='diseaseMeasure' class='inputType7' value='"+disease.diseaseMeasure+"'/></td>"+
                            "<td style='text-align:center;'><img src='images/public/reduce.png' class='removeTr' style='margin-top: 2px;' ></td>"+
                            "</tr>");
                    row.appendTo(bugDiseasesTable);
                    $(".removeTr").click(function(){//点击动态移除一行
                        $(this).parent().parent().remove();
                    });

                });
                var growthConditions = growthData.growthConditions;//生长条件
                var growthConditionTable = $("#paramsList3");//地温条件表
                growthConditionTable.html("");
                $(growthConditions).each(function (i,growthCondition) {
                    var tempRangeStart = growthCondition.tempRangeStart+"";
                    tempRangeStart = tempRangeStart.replace("null","");
                    var tempRangeEnd = growthCondition.tempRangeEnd+"";
                    tempRangeEnd = tempRangeEnd.replace("null","");
                    var options="";//options的处理
                    var ifAvg = growthCondition.ifavg;
                    if(ifAvg == "1"){
                        options="<option value='1' selected='selected'>是</option><option value='0' >否</option>";
                    }else{
                        options="<option value='1' >是</option><option value='0' selected='selected'>否</option>";
                    }
                    var row = $("<tr class='paramsTr'>"+
                            "<td><input type='text' name='tempRangeStart' class='inputType2'  value='"+tempRangeStart+"'/></td>"+
                            "<td><input type='text' name='tempRangeEnd' class='inputType3' value='"+tempRangeEnd+"'/></td>"+
                            "<td><select name='ifavg' class='inputType4'>"+options+"</select></td>"+
                            "<td><input type='text' name='instruction' class='inputType5' value='"+growthCondition.instruction+"'/></td>"+
                            "<td style='text-align:center;'><img src='images/public/reduce.png' class='removeTr' style='margin-top: 2px;' ></td>"+
                            "</tr>");
                    row.appendTo(growthConditionTable);
                    $(".removeTr").click(function(){//点击动态移除一行
                        $(this).parent().parent().remove();
                    });
                })

            };

            /**
             * 区域选择控件
             * @param regionIdName 区域ID
             * *@param cropIdName 作物ID
             * @version <1> 2018-4-17 cxw : created.
             */
            var RegionSelectFun = function(regionIdName,cropIdName){
                var txtArea = document.getElementById(regionIdName);
                txtArea.onclick = function(){
                    var opts = {colNum:3,width:400};
                    opts = {colNum:3,width:400,url:REGION_CONFIG.findRegion_url,closeFun:function(){
                        var regionId = txtArea.getAttribute("regionId");
                        $('#'+cropIdName).html("");

                        if(regionId!=null) {

                            queryCropFun(regionId,cropIdName)
                        }
                        else{
                            $('#'+cropIdName).html('<option value="">--请选择--</option>');
                        }
                    }};
                    var regionSelector = new RegionModule.RegionSelector(regionIdName,opts);
                    regionSelector.show();
                };
            };

            /**
             * 点击区域时查询作物列表
             * @param regionId 区域ID
             * @param cropIdName 区域名称Id
             * @version <1> 2018-4-17 cxw : created.
             */
            var queryCropFun = function(regionId,cropIdName){
                var ajax = new BaseAjax();
                ajax.opts.url = CROP_CONFIG.queryCropListByRegionId_url+"?regionId="+regionId;
                ajax.opts.contentType = "application/json";
                //ajax.opts.data =  JSON.stringify({regionId:regionId});
                ajax.opts.async = false; //同步请求
                ajax.opts.successFun = function (data) {
                    var crop = data.data;
                    initCropFun(crop,cropIdName);
                };
                ajax.run();
            };

            /**
             * 作物onchange查询生育期列表
             * @param cropsId 作物ID
             * @version <1> 2018-8-13 lj : created.
             */
            var queryGrowthFun = function(){
                var cropsId=$('#cropsId').val();
                if(cropsId==''){
                    return;
                }
                var ajax = new BaseAjax();
                ajax.opts.url = CROPS_GROWTH_MANAGER.findList_url+"?cropsId="+cropsId;
                ajax.opts.contentType = "application/json";
                ajax.opts.async = false; //同步请求
                ajax.opts.successFun = function (data) {
                    var data = data.data;
                    initGrowthFun(data);
                };
                ajax.run();
            };

            /**
             * 根据生育期配置查询病害虫害地温等信息
             * @param growthId 作物ID
             * @version <1> 2018-8-13 lj : created.
             */
            var queryInfoByGrowthFun = function(){
                var growthName=$('#growthName').val();
                if(growthName==''){
                    return;
                }
                var ajax = new BaseAjax();
                ajax.opts.url = CROPS_GROWTH_MANAGER.findById_url+"?growthId="+growthName;
                ajax.opts.contentType = "application/json";
                ajax.opts.async = false; //同步请求
                ajax.opts.successFun = function (data) {
                    var data = data.data;
                    //回显播种期
                    var ifGrowthStart=data.growthManager.ifGrowthStart;
                    $("#ifGrowthStart").find("option[value='"+ifGrowthStart+"']").prop("selected","selected");
                    //回显病害虫害地温等信息
                    initEachTrValues(data);
                    //回显备注
                    $("#remark").val(data.growthManager.remark);
                };
                ajax.run();
            };

            /**
             * 初始化作物下拉框
             * @param crop 查询出的作物对象集合
             * @param cropIdName 区域名称Id
             * @version <1> 2018-04-18 cxw : created.
             */
            var initCropFun = function(crop,cropIdName){
                var result;
                result = '<option value="">--请选择--</option>';
                if(crop!=null)
                {
                    $.each(crop,function(i,o){
                        result += '<option value = "' + o.cropId + '">' + o.cropName + '</option>';
                    });
                    if(result!='')
                    {
                        $('#'+cropIdName).html(result);
                    }
                    else{
                        $('#'+cropIdName).html('<option value="">--请选择--</option>');
                    }
                }
                else{
                    $('#'+cropIdName).html('<option value="">--请选择--</option>');
                }
            };

            /**
             * 生育期对象
             * @param data 查询的生育期对象集合
             * @version <1> 2018-08-13 lj : created.
             */
            var initGrowthFun = function(data){
                var result;
                result = '<option value="">--请选择--</option>';
                if(data!=null&&data.length>0)
                {
                    $.each(data,function(i,o){
                        result += '<option value = "' + o.id + '">' + o.growthName + '</option>';
                    });
                    if(result!='')
                    {
                        $('#growthName').html(result);
                    }
                    else{
                        $('#growthName').html('<option value="">--请选择--</option>');
                    }
                }
                else{
                    $('#growthName').html('<option value="">--请选择--</option>');
                }
            };

            /**
             * 开始月范围触发事件加载日范围
             * @version <1> 2018-4-20 cxw : created.
             */
            var arrMon = ['01','03','05','07','08','10','12']; //包含31天的月份数组
            var arrDayForLeast = ['01','02','03','04','05','06','07','08','09','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29'];
            var arrDayForMiddle = ['01','02','03','04','05','06','07','08','09','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30'];
            var arrDayForMost = ['01','02','03','04','05','06','07','08','09','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31'];
            var dateStartEvent = function(){
                var startMonth = $('#rangeStartMonth').val();
                initDateRange('#rangeStartDay',startMonth);
            };

            /**
             * 结束月范围触发事件加载日范围
             * @version <1> 2018-4-20 cxw : created.
             */
            var dateEndEvent = function(){
                var endMonth = $('#rangeEndMonth').val();
                initDateRange('#rangeEndDay',endMonth);
            };

            /**
             * 结束月范围触发事件加载日范围
             * @param obj 要加载的select框对象
             * @param dateVal 月范围值
             * @version <1> 2018-4-20 cxw : created.
             */
            var initDateRange = function (obj,dateVal) {
                var result;
                //如果是包含31天的月份加载日范围为31天
                if(isInArray(arrMon,dateVal)){
                    for(var index in arrDayForMost){
                        result += '<option value = "' + arrDayForMost[index] + '">' + arrDayForMost[index]+"日" + '</option>';
                    }
                }
                //如果是包含29天的月份加载日范围为29天
                else if(dateVal=='02'){
                    for(var index in arrDayForLeast){
                        result += '<option value = "' + arrDayForLeast[index] + '">' + arrDayForLeast[index]+"日" + '</option>';
                    }
                }
                //如果是包含30天的月份加载日范围为30天
                else{
                    for(var index in arrDayForMiddle){
                        result += '<option value = "' + arrDayForMiddle[index] + '">' + arrDayForMiddle[index]+"日" + '</option>';
                    }
                }
                $(obj).html(result);
                initJumpYear();
            };

            /**
             * 加载是否跨年
             * @version <1> 2018-4-20 cxw : created.
             */
            var initJumpYear = function(){
                var  rangeStartMonth =  $('#rangeStartMonth').val();
                var  rangeEndMonth =  $('#rangeEndMonth').val();
                var select = document.getElementById('ifspan');
                if(rangeStartMonth>rangeEndMonth){
                    for (var i = 0; i < select.options.length; i++){
                        if (select.options[i].value == '1'){
                            select.options[i].selected = true;
                            break;
                        }
                    }
                }
                else{
                    for (var i = 0; i < select.options.length; i++){
                        if (select.options[i].value == '0'){
                            select.options[i].selected = true;
                            break;
                        }
                    }
                }

            };

            /**
             * 判断数组是否包含某个值
             * @param arr 数组
             * @param value 是否包含的值
             * @version <1> 2018-4-20 cxw : created.
             */
            var  isInArray = function(arr,value){
                var index = $.inArray(value,arr);
                if(index >= 0){
                    return true;
                }
                return false;
            };

            /**
             * 农作物生育周期记录的渲染
             * @version <1> 2018-04-13 lxy： Created.
             * @version <2> 2018-04-18 cxw： update:增加区域和作物
             */
            var cropsGrowthPriodGrid = function () {
                $("#cropsGrowthPriodGrid").jqGrid({
                    url: CROPS_GROWTH_PERIOD_CONFIG.findByPage_url,
                    datatype: "json",
                    postData: {
                        "cropsGrowthPeriodParam":{}
                    },
                    mtype: 'POST',
                    jsonReader: {
                        root: "list",
                        total: "pages",
                        page: "page",
                        records: "total",
                        repeatitems: false
                    },
                    rownumbers: true,
                    colNames: ['growthId','rangeStart','rangeEnd','区域', '作物', '生育期名称','日期范围', '创建时间','操作'],
                    colModel: [
                        {name: 'growthId', index: 'growthId', hidden: true},
                        {name: 'rangeStart', index: 'rangeStart', hidden: true},
                        {name: 'rangeEnd', index: 'rangeEnd',  hidden: true},
                        {name: 'regionName', index: 'regionName', align: 'center', width: '20%'},
                        {name: 'cropsName', index: 'cropsName', align: 'center', width: '10%'},
                        {name: 'growthName', index: 'growthName', align: 'center', width: '20%'},
                        {name: 'dateSpan', index: 'dateSpan', align: 'center', width: '15%',
                            formatter: function (cellvalue, options, rowObject) {
                                return rowObject.rangeStart +"至"+rowObject.rangeEnd
                            }
                        },
                        {name: 'createTime', index: 'createTime', align: 'center', width: '15%'},
                        {
                            name: 'cz',
                            index: 'cz',
                            width: '20%',
                            align: "center",
                            sortable: false,
                            formatter: function (cellvalue, options, rowObject) {
                                var str = "<img src='images/public/Tedit.png' class='editBtn' data-id='" + rowObject.growthId + "' title='编辑' style='margin-right: 3px;'>"+
                                        "<img src='images/public/Twatch.png' class='seeBtn' data-id='"+ rowObject.growthId +"' title='查看明细' >"+
                                        "<img src='images/public/Tdelete.png' class='delBtn' data-id='" + rowObject.growthId + "' title='删除' >";
                                return str;
                            }
                        }
                    ],
                    width: '100%',
                    autowidth: true,
                    height: '100%',
                    rowNum: 15,
                    rowList: [15,30],
                    pager: '#pager2',
                    sortname: 'id',
                    viewrecords: true,
                    sortorder: "desc",
                    loadComplete: function () {
                        commons.isNextDisable();
                        $(".editBtn,.delBtn,.seeBtn").off("click");
                        $(".editBtn").on("click", function () {
                            editFun($(this).attr("data-id"));
                        });
                        $(".seeBtn").on("click", function () {
                            seeFun($(this).attr("data-id"));
                        });
                        $(".delBtn").on("click", function () {
                            deleteFun($(this).attr("data-id"));
                        });
                    }
                });
            };

            /**
             * 查看农情配置详情
             * @version <1> 2018-04-18 lxy : Created.
             */
            var seeFun = function (growthId) {
                var height = $(document.body).height()*0.80;//高度
                var width = $(document.body).width()*0.70;//宽度
                var ajax = new BaseAjax();
                ajax.opts.url = CROPS_GROWTH_PERIOD_CONFIG.findById_url+"?growthId="+growthId;
                ajax.opts.contentType = "application/json";
                ajax.opts.async = false; //同步请求
                ajax.opts.successFun = function(result) {
                    initDataDetail(result.data);
                    var showDetailDialog = $("#showDetailDialog");//简报设置详情
                    var dialogParent = showDetailDialog.parent();
                    var dialogOwn = showDetailDialog.clone();
                    showDetailDialog.dialog({
                        autoOpen: false,
                        title: '简报设置详情',
                        height: height,
                        width: width,
                        modal: true,
                        close:function(){
                            dialogOwn.appendTo(dialogParent);
                            $(this).dialog("destroy").remove();
                        },
                        buttons: [
                            {
                                text:"关闭",
                                click:function(){
                                    $(this).dialog("close");
                                }
                            }
                        ]
                    });
                    showDetailDialog.dialog("open");
                };
                ajax.run();


            };

            /**
             * 根据指定的查询条件，查询对应的记录并重新渲染
             * @version <1> 2018-04-13 lxy： Created.
             * @version <2> 2018-04-18 cxw： update:增加区域和作物查询条件.
             */
            var searchFun = function () {
                var growthName = $.trim($("#search_growthName").val());
                var cropsId = $.trim($("#cropId").val());
                var regionId = document.getElementById("txtArea").getAttribute("regionId");
                $("#cropsGrowthPriodGrid").jqGrid('setGridParam', {
                    datatype: 'json',
                    postData: {'growthName': growthName, 'cropsId': cropsId, 'regionId': regionId},
                    page: 1
                }).trigger("reloadGrid");
            };

            /**
             * 获取表单新增或者修改的数据
             * @version <1> 2018-04-18 cxw： Created.
             * @version <2> 2018-05-22 lxy： updated. 新增了修改其他生育期相关的数据
             */
            var getGrowthData = function() {
                //获取生育期的数据
                var growthName = $.trim($("#growthName").find("option:selected").text());
                var cropsId = $.trim($("#cropsId").val());
                var regionId = document.getElementById("region").getAttribute("regionId");
                var rangeStartMonth =  $('#rangeStartMonth').val();
                var rangeStartDay =  $('#rangeStartDay').val();
                var rangeStart = rangeStartMonth+"-"+rangeStartDay;
                var rangeEndMonth =  $('#rangeEndMonth').val();
                var rangeEndDay = $('#rangeEndDay').val();
                var rangeEnd =rangeEndMonth+"-"+rangeEndDay;
                var ifspan = $.trim($("#ifspan").val());
                var ifGrowthStart = $.trim($("#ifGrowthStart").val());
                var indexNo = $('#indexNo').val();
                var remark = $('#remark').val();
                //获取生育期封装的其他数据
                var growthData = wrapEachTrValues();
                //封装生育期的数据
                growthData["growthPeriod"] = {
                    growthName: growthName,
                    cropsId: cropsId,
                    regionId: regionId,
                    rangeStart: rangeStart,
                    rangeEnd: rangeEnd,
                    ifspan: ifspan,
                    ifGrowthStart: ifGrowthStart,
                    indexNo:indexNo,
                    remark:remark
                };
                return growthData;
            };

            /**
             * 新增生育期页
             * @version <1> 2018-04-12 lxy： Created.
             * @version <2> 2018-04-18 cxw： update:1.加载初始化区域控件；2.完善注释
             */
            var addFun = function() {
                var height = $(document.body).height()-150;//高度
                var width = $(document.body).width()*0.60;//宽度
                showTr(1);//病害
                showTr(2);//虫害
                showTr(3);//地温关系
                RegionSelectFun("region","cropsId");
                document.getElementById("cropsId").onchange = queryGrowthFun;
                document.getElementById("growthName").onchange = queryInfoByGrowthFun;
                document.getElementById("rangeStartMonth").onchange = dateStartEvent;
                document.getElementById("rangeEndMonth").onchange = dateEndEvent;
                clearInput();//清空数据
                var cropsGrowthPeriodDialog =  $("#dataTypeInfo");
                var dialogParent = cropsGrowthPeriodDialog.parent();
                var dialogOwn = cropsGrowthPeriodDialog.clone();
                cropsGrowthPeriodDialog.dialog({
                    autoOpen: false,
                    title:'生育期配置信息',
                    height: height,
                    width: width,
                    modal: true,
                    close:function(){
                        dialogOwn.appendTo(dialogParent);
                        $(this).dialog("destroy").remove();
                    },
                    buttons: [{
                        text:"保存",
                        click:function(){
                            addSaveFun(cropsGrowthPeriodDialog);
                        }},{
                        text:"取消",
                        click:function(){
                            $(this).dialog("close");
                        }
                    }]
                });
                cropsGrowthPeriodDialog.dialog("open");
            };

            /**
             * 保存生育期信息
             * @param cropsGrowthPeriodDialog 弹框对象
             * @version <1> 2018-04-12 lxy： Created.
             * *@version <2> 2018-04-18 cxw： update:完善注释及更改提示信息
             */
            var addSaveFun = function(cropsGrowthPeriodDialog) {
                //校验输入框信息
                if (!formVerf()) {
                    return;
                }
                var baseAjax = new BaseAjax();
                baseAjax.opts.url = CROPS_GROWTH_PERIOD_CONFIG.save_url;
                baseAjax.opts.async = false; //同步
                baseAjax.opts.contentType = "application/json";
                baseAjax.opts.data = JSON.stringify(getGrowthData());
                baseAjax.opts.successFun = function (result) {
                    if (result.flag) {
                        $("#cropsGrowthPriodGrid").trigger("reloadGrid");
                        cropsGrowthPeriodDialog.dialog("close");
                        PopWin.showMessageWin("新增成功");
                    } else {
                        PopWin.showMessageWin("新增失败:"+result.msg);
                    }
                };
                baseAjax.opts.errorFun = function (result) {
                    PopWin.showMessageWin("新增失败");
                };
                baseAjax.run();
            };

            /**
             * 删除生育期信息
             * @param id 生育期主键
             * @version <1> 2018-04-12 lxy： Created.
             * @version <2> 2018-04-18 cxw： update:1.原参数传递为生育期对象，现改为传递生育期主键.;2.完善注释及更改提示信息
             */
            var deleteFun = function (id) {
                var confirmDialog = $("#confirmDialog");
                confirmDialog.html("是否确认删除所选记录？");
                confirmDialog.dialog({
                    autoOpen: false,
                    title: '系统提示',
                    height: 160,
                    width: 410,
                    modal: true,
                    buttons: [{
                        text:"是",
                        click:function(){
                            var ajax = new BaseAjax();
                            ajax.opts.url = CROPS_GROWTH_PERIOD_CONFIG.del_url+"?growthId="+id;
                           // ajax.opts.data = JSON.stringify({'growthId':id});
                            ajax.opts.contentType = "application/json";
                            ajax.opts.successFun = function (result) {
                                if (result.flag) {
                                    $("#cropsGrowthPriodGrid").trigger("reloadGrid");
                                    confirmDialog.dialog("close");
                                    PopWin.showMessageWin("删除成功");
                                } else {
                                    PopWin.showMessageWin("删除失败");
                                }
                            };
                            ajax.opts.errorFun = function () {
                                PopWin.showMessageWin("删除失败");
                            };
                            ajax.run();
                        }},{
                        text:"否",
                        click:function(){
                            $(this).dialog("close");
                        }
                    }]
                });
                confirmDialog.dialog("open");
            };

            /**
             * 修改生育期页
             * @param id 生育期主键
             * @version <1> 2018-04-12 lxy： Created.
             * @version <2> 2018-04-18 cxw： update:1.加载初始化区域控件；2.完善注释
             */
            var editFun = function (id) {
                var height = $(document.body).height()-150;//高度
                var width = $(document.body).width()*0.60;//宽度
                showTr(1);//病害
                showTr(2);//虫害
                showTr(3);//地温关系
                RegionSelectFun("region","cropsId");
                document.getElementById("cropsId").onchange = queryGrowthFun;
                document.getElementById("growthName").onchange = queryInfoByGrowthFun;
                document.getElementById("rangeStartMonth").onchange = dateStartEvent;
                document.getElementById("rangeEndMonth").onchange = dateEndEvent;
                var ajax = new BaseAjax();
                ajax.opts.url = CROPS_GROWTH_PERIOD_CONFIG.findById_url+"?growthId="+id;
                ajax.opts.contentType = "application/json";
                ajax.opts.async = false; //同步请求
                ajax.opts.successFun = function(result) {
                    if (result.flag) {
                        initData(result.data);//填充数据
                        var configDialog =  $("#dataTypeInfo");
                        var dialogParent = configDialog.parent();
                        var dialogOwn = configDialog.clone();
                        configDialog.dialog({
                            autoOpen: false,
                            title:'生育期配置信息',
                            height: height,
                            width: width,
                            modal: true,
                            close:function(){
                                dialogOwn.appendTo(dialogParent);
                                $(this).dialog("destroy").remove();
                            },
                            buttons:[
                                {
                                    text:"保存",
                                    click:function(){
                                        if (!formVerf()) {
                                            return;
                                        }
                                        var param = getGrowthData();
                                        param.growthId = id;
                                        update(configDialog, param);
                                    }},{
                                    text:"取消",
                                    click:function(){
                                        $(this).dialog("close");
                                    }
                                }
                            ]
                        });
                        configDialog.dialog("open");
                    }
                };
                ajax.run();
            };

            /**
             * 保存更新内容
             * @param configDialog 弹框对象
             * @param param 生育期更新参数对象
             * @version <1> 2018-04-13 lxy： Created.
             * @version <1> 2018-04-18 cxw： update:完善注释及更改提示信息
             */
            var update = function(configDialog, param) {
                var baseAjax = new BaseAjax();
                baseAjax.opts.url = CROPS_GROWTH_PERIOD_CONFIG.update_url;
                baseAjax.opts.async = false; //同步
                baseAjax.opts.contentType = "application/json";
                baseAjax.opts.data = JSON.stringify(param);
                baseAjax.opts.successFun = function (result) {
                    if (result.flag) {
                        $("#cropsGrowthPriodGrid").trigger("reloadGrid");
                        configDialog.dialog("close");
                        PopWin.showMessageWin("修改成功");
                    } else {
                        PopWin.showMessageWin("修改失败");
                    }
                };
                baseAjax.opts.errorFun = function (result) {
                    PopWin.showMessageWin("修改失败");
                };
                baseAjax.run();
            };

            /**
             * 弹出修改页面时初始化加载当前修改对象信息
             * @param data 生育期对象信息
             * @version <1> 2018-04-18 cxw： Created.
             */
            var initData = function(data) {
                var growthPeriodData = data.growthPeriod;//生育期数据
                /*$("#growthName").val(growthPeriodData.growthName);*/
                //$("#growthName").html("<option value = '"+growthPeriodData.growthId+"'>"+growthPeriodData.growthName+"</option>")
                $("#region").val(growthPeriodData.regionName);
                $("#region").attr("regionId",growthPeriodData.regionId);
                //查询作物
                queryCropFun(growthPeriodData.regionId,"cropsId");
                $("#cropsId").find("option[value = '"+growthPeriodData.cropsId+"']").attr("selected","selected");
                //$("#cropsId").html("<option value = '"+growthPeriodData.cropsId+"'>"+growthPeriodData.cropsName+"</option>");
                //查询生育期
                queryGrowthFun();
                var gwn=$("#growthName").find("option:contains('"+growthPeriodData.growthName+"')");
                if(gwn.length>0){
                    gwn.attr("selected","selected");
                }else{
                    $("#growthName").html("<option value = '"+growthPeriodData.growthId+"'>"+growthPeriodData.growthName+"</option>");
                }
                var rangeStart = growthPeriodData.rangeStart.split("-");
                var rangeEnd = growthPeriodData.rangeEnd.split("-");
                $('#rangeStartMonth').val(rangeStart[0]);
                $('#rangeStartDay').val(rangeStart[1]);
                $('#rangeEndMonth').val(rangeEnd[0]);
                $('#rangeEndDay').val(rangeEnd[1]);
                $('#indexNo').val(growthPeriodData.indexNo);
                $('#remark').val(growthPeriodData.remark);
                $("#ifspan").find("option[value = '"+growthPeriodData.ifspan+"']").attr("selected","selected");
                $("#ifGrowthStart").find("option[value = '"+growthPeriodData.ifGrowthStart+"']").attr("selected","selected");
                //初始化生育期其他数据
                initEachTrValues(data);
            };

            /**
             * 加载详细页面
             * @param data 生育期对象信息
             * @version <1> 2018-06-13 lxy： Created.
             */
            var initDataDetail = function(data) {
                var growthPeriodData = data.growthPeriod;//生育期数据
                $("#growthName_V").html(growthPeriodData.growthName);
                $("#cropsId_V").html(growthPeriodData.cropsName);
                $("#region_V").html(growthPeriodData.regionName);
                $('#rangeStart_V').html(growthPeriodData.rangeStart);
                $('#rangeEnd_V').html(growthPeriodData.rangeEnd);
                $('#indexNo_V').html(growthPeriodData.indexNo);
                $('#remark_V').html(growthPeriodData.remark);
                $("#ifspan_V").html(growthPeriodData.ifspan == '1'?"是":"否");
                $("#ifGrowthStart_V").html(growthPeriodData.ifGrowthStart=='1'?"是":"否");
                //初始化生育期其他数据
                initEachViewTrValues(data);
            };

            //修改时候填充所有数据
            var initEachViewTrValues = function (growthData) {
                var diseases = growthData.diseases;//病害
                var diseasesTable = $('#paramsListV1');//病害表
                diseasesTable.html("");//清空原来数据
                $(diseases).each(function(i,disease){
                    var row = $("<tr class='paramsTr'>"+
                            "<td><span>"+disease.diseaseName+"</span></td>"+
                            "<td><span>"+disease.diseaseMeasure+"</span></td>"+
                            "</tr>");
                    row.appendTo(diseasesTable);
                });
                var bugDiseases = growthData.bugDiseases;//虫害
                var bugDiseasesTable = $('#paramsListV2');//虫害表
                bugDiseasesTable.html("");//清空原来数据
                $(bugDiseases).each(function(i,disease){
                    var row = $("<tr class='paramsTr'>"+
                            "<td><span>"+disease.diseaseName+"</span></td>"+
                            "<td><span>"+disease.diseaseMeasure+"</span></td>"+
                            "</tr>");
                    row.appendTo(bugDiseasesTable);
                });
                var growthConditions = growthData.growthConditions;//生长条件
                var growthConditionTable = $("#paramsListV3");//地温条件表
                growthConditionTable.html("");//清空原来数据
                $(growthConditions).each(function (i,growthCondition) {
                    var tempRangeStart = growthCondition.tempRangeStart+"";
                    tempRangeStart = tempRangeStart.replace("null","");
                    var tempRangeEnd = growthCondition.tempRangeEnd+"";
                    tempRangeEnd = tempRangeEnd.replace("null","");
                    var options="";//options的处理
                    var ifAvg = growthCondition.ifavg;
                    if(ifAvg == "1"){
                        options="是";
                    }else{
                        options="否";
                    }
                    var row = $("<tr class='paramsTr'>"+
                            "<td><span>"+tempRangeStart+"</span></td>"+
                            "<td><span>"+tempRangeEnd+"</span></td>"+
                            "<td><span>"+options+"</span></td>"+
                            "<td><span>"+growthCondition.instruction+"</span></td>"+
                            "</tr>");
                    row.appendTo(growthConditionTable);
                });

            };


            /**
             * 校验input框输入信息
             * @version <1> 2018-04-17 cxw： Created.
             */
            var formVerf = function () {
                var errorDiv = $('#showError');
                //初始化去掉错误样式
                $(".formErrorInfo").remove();
                $("input").removeClass("formInputHighlight");
                if(formVerfication.checkInputIsEmpty($('#growthName'),errorDiv,'生育期名称不能为空')){
                    return false;
                }
               /* if(formVerfication.checkInputIsEmpty($('#indexNo'),errorDiv,'序号不能为空')){
                    return false;
                }
                if(formVerfication.checkInputIsNumber($('#indexNo'),errorDiv,'序号只能为正整数')){
                    return false;
                }
                if(formVerfication.checkInputLength(1,5,$('#indexNo'),errorDiv,'序号数字不能超过5位')){
                    return false;
                }
                if(formVerfication.checkInputIsPositiveInteger($('#indexNo'),errorDiv,'序号为正整数')){
                    return false;
                }*/
                if(formVerfication.checkInputIsEmpty($('#region'),errorDiv,'区域不能为空')){
                    return false;
                }
                if(formVerfication.checkInputIsEmpty($('#cropsId'),errorDiv,'作物不能为空')){
                    return false;
                }

                if(formVerfication.checkInputIsEmpty($('#rangeStartMonth'),errorDiv,'开始时间不能为空')){
                    return false;
                }
                if(formVerfication.checkInputIsEmpty($('#rangeStartDay'),errorDiv,'开始时间不能为空')){
                    return false;
                }
                if(formVerfication.checkInputIsEmpty($('#rangeEndMonth'),errorDiv,'结束时间不能为空')){
                    return false;
                }
                if(formVerfication.checkInputIsEmpty($('#rangeEndDay'),errorDiv,'结束时间不能为空')){
                    return false;
                }
                if(!verifyDisease()){
                    return false;
                }
                if(!verifyBugDisease()){
                    return false;
                }
                if(!verifyCondition()){
                    return false;
                }
                return true;
            };

            //验证病害
            var verifyDisease = function(){
                var flag = true;
                //获取地温条件的div
                var diseaseDiv = $("#diseaseDiv");
                //循环遍历所有的病害信息
                $("#paramsList1").find("tr").each(function(){
                    var tdArr = $(this).children();
                    var diseaseName = tdArr.eq(0).find("input").val();//病害名称
                    var diseaseMeasure = tdArr.eq(1).find("input").val();//病害防治措施
                    if(diseaseName != ""){
                        if(formVerfication.checkInputLength(1,100,tdArr.eq(0).find("input"),diseaseDiv,"病害名称字符不能超过100位")){
                            flag=false;
                            return flag;
                        }
                    }
                    if(diseaseMeasure != ""){
                        if(formVerfication.checkInputLength(1,500,tdArr.eq(1).find("input"),diseaseDiv,"防治措施字符不能超过500位")){
                            flag=false;
                            return flag;
                        }
                    }
                });
                return flag;
            };

            //验证虫害
            var verifyBugDisease = function(){
                var flag = true;
                //获取地温条件的div
                var bugDiseaseDiv = $("#bugDiseaseDiv");
                //循环遍历所有的病害信息
                $("#paramsList2").find("tr").each(function(){
                    var tdArr = $(this).children();
                    var diseaseName = tdArr.eq(0).find("input").val();//病害名称
                    var diseaseMeasure = tdArr.eq(1).find("input").val();//病害防治措施
                    if(diseaseName != ""){
                        if(formVerfication.checkInputLength(1,100,tdArr.eq(0).find("input"),bugDiseaseDiv,"虫害名称字符不能超过100位")){
                            flag=false;
                            return flag;
                        }
                    }
                    if(diseaseMeasure != ""){
                        if(formVerfication.checkInputLength(1,500,tdArr.eq(1).find("input"),bugDiseaseDiv,"防治措施字符不能超过500位")){
                            flag=false;
                            return flag;
                        }
                    }
                });
                return flag;
            };

            //验证地温条件
            var verifyCondition = function(){
                var flag = true;
                //获取地温条件的div
                var conditionDiv = $("#conditionDiv");
                //循环遍历所有的条件范围
                $("#paramsList3").find("tr").each(function(){
                    var tdArr = $(this).children();
                    var tempRangeStart = tdArr.eq(0).find("input").val();//开始范围
                    var tempRangeEnd = tdArr.eq(1).find("input").val();//结束范围
                    var instruction = tdArr.eq(3).find("input").val();//条件说明
                    if(tempRangeStart != ""){
                        if(formVerfication.checkInputIsPlusMinusNumber(tdArr.eq(0).find("input"),conditionDiv,"开始范围为正整数")){
                            flag=false;
                            return flag;
                        }
                    }

                    if(tempRangeStart != ""){
                        if(formVerfication.checkInputLength(1,5,tdArr.eq(0).find("input"),conditionDiv,"开始范围数字不能超过5位")){
                            flag=false;
                            return flag;
                        }
                    }

                    if(tempRangeEnd != ""){
                        if(formVerfication.checkInputIsPlusMinusNumber(tdArr.eq(1).find("input"),conditionDiv,"结束范围为正整数")){
                            flag=false;
                            return flag;
                        }

                    }
                    if(tempRangeEnd != ""){
                        if(formVerfication.checkInputLength(1,5,tdArr.eq(1).find("input"),conditionDiv,"结束范围数字不能超过5位")){
                            flag=false;
                            return flag;
                        }
                    }
                    if(instruction != ""){
                        if(formVerfication.checkInputLength(1,100,tdArr.eq(3).find("input"),conditionDiv,"条件说明字符不能超过100位")){
                            flag=false;
                            return flag;
                        }
                    }
                });
                return flag;
            };

            /**
             * 加载新增页时清空文本输入内容
             * @version <1> 2018-04-17 cxw： Created.
             */
            var clearInput = function() {
                $(".inputType").val("");
                $("#cropsId").html("<option value=''>--请选择--</option>");
                $("#region").val('');
                $("#region").attr("regionId",'');
                $("#ifspan").find("option").first().attr("selected", "selected");
                $("#ifGrowthStart").find("option").first().attr("selected", "selected");
            };

            var chanageTableCss = function(){
                var divObj = $('#cropsGrowthPriodGrid').parent('div');
                divObj.addClass('tableStyle');
                divObj.css({'maxHeight':($(".rightMain").height()-$(".searchItems").height()-$(".ui-jqgrid-hdiv").height())-$("#pager2").height()-50+"px"});
            };

            init();
        });
    </script>