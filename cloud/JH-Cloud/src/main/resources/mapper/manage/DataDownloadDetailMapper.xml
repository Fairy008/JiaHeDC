<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.jh.manage.download.mapping.IDataDownloadDetailMapper" >
  <resultMap id="BaseResultMap" type="com.jh.manage.download.entity.DataDownloadDetail" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="download_detail_id" property="downloadDetailId" jdbcType="INTEGER" />
    <result column="data_status" property="dataStatus" jdbcType="CHAR" />
    <result column="del_flag" property="delFlag" jdbcType="CHAR" />
    <result column="create_time" property="createTime" jdbcType="TIMESTAMP" />
    <result column="creator_name" property="creatorName" jdbcType="VARCHAR" />
    <result column="creator" property="creator" jdbcType="INTEGER" />
    <result column="modify_time" property="modifyTime" jdbcType="TIMESTAMP" />
    <result column="modifier_name" property="modifierName" jdbcType="VARCHAR" />
    <result column="modifier" property="modifier" jdbcType="INTEGER" />
    <result column="remark" property="remark" jdbcType="VARCHAR" />
    <result column="download_id" property="downloadId" jdbcType="INTEGER" />
    <result column="metadata_id" property="metadataId" jdbcType="INTEGER" />
    <result column="product_name" property="productName" jdbcType="VARCHAR" />
    <result column="product_time" property="productTime" jdbcType="TIMESTAMP" />
    <result column="download_time" property="downloadTime" jdbcType="TIMESTAMP" />
  </resultMap>
  <sql id="Base_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    download_detail_id, data_status, del_flag, create_time, creator_name, creator, modify_time, 
    modifier_name, modifier, remark, download_id, metadata_id, product_name, product_time, 
    download_time
  </sql>

  <!--
  批量插入
  -->
  <insert id="batchInsert" parameterType="java.util.List">
    insert into man_download_detail(download_id,product_name,product_time,download_time,file_size)
    <trim prefix="values"  suffixOverrides="," >
      <foreach collection="list" item="detail" index="index">
        <trim prefix="(" suffix=")," suffixOverrides=",">
          <if test="detail.downloadId != null" >#{detail.downloadId,jdbcType=INTEGER},</if>
          <if test="detail.productName != null" >#{detail.productName,jdbcType=VARCHAR},</if>
          <if test="detail.productTime != null" >#{detail.productTime,jdbcType=DATE},</if>
          now(),
          <if test="detail.fileSize != null" >#{detail.fileSize,jdbcType=VARCHAR},</if>
        </trim>
      </foreach>
    </trim>
  </insert>

  <!--
  根据任务查询下载的文件详情
  -->
  <select id="findDetailByDownloadId" parameterType="java.lang.Integer" resultType="com.jh.manage.download.entity.DataDownloadDetail">
    SELECT product_name AS productName,product_time AS productTime,download_time AS downloadTime,file_size AS fileSize
    FROM man_download_detail
    WHERE download_id = #{downloadId,jdbcType=INTEGER}
  </select>

</mapper>