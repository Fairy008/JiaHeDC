<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.jh.forum.bbs.mapping.IForumOrderDataMapper" >
  <resultMap id="BaseResultMap" type="com.jh.forum.bbs.entity.ForumOrderData" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="order_id" property="orderId" jdbcType="INTEGER" />
    <result column="data_status" property="dataStatus" jdbcType="CHAR" />
    <result column="del_flag" property="delFlag" jdbcType="CHAR" />
    <result column="create_time" property="createTime" jdbcType="DATE" />
    <result column="creator_name" property="creatorName" jdbcType="VARCHAR" />
    <result column="creator" property="creator" jdbcType="INTEGER" />
    <result column="modify_time" property="modifyTime" jdbcType="DATE" />
    <result column="modifier_name" property="modifierName" jdbcType="VARCHAR" />
    <result column="modifier" property="modifier" jdbcType="INTEGER" />
    <result column="remark" property="remark" jdbcType="VARCHAR" />
    <result column="region_id" property="regionId" jdbcType="BIGINT" />
    <result column="region_code" property="regionCode" jdbcType="VARCHAR" />
    <result column="crop" property="crop" jdbcType="VARCHAR" />
    <result column="accuracy_range" property="accuracyRange" jdbcType="VARCHAR" />
    <result column="data_classify" property="dataClassify" jdbcType="VARCHAR" />
    <result column="start_date" property="startDate" jdbcType="DATE" />
    <result column="end_date" property="endDate" jdbcType="DATE" />
    <result column="data_show" property="dataShow" jdbcType="INTEGER" />
    <result column="order_tel" property="orderTel" jdbcType="CHAR" />
    <result column="order_status" property="orderStatus" jdbcType="CHAR" />
  </resultMap>

  <!--BaseResultVoMap-->
  <resultMap id="BaseResultVoMap" type="com.jh.forum.bbs.vo.OrderDataVo"  extends="BaseResultMap">

  </resultMap>


  <sql id="Base_Column_List" >
    order_id, data_status, del_flag, create_time, creator_name, creator, modify_time,
    modifier_name, modifier, remark, region_id, crop, accuracy_range, data_classify, 
    start_date, end_date, data_show, order_tel, order_status
  </sql>

  <!--根据专家id查询专家详情-->
  <select id="getById" resultMap="BaseResultMap" parameterType="java.lang.Integer" >
    select
    <include refid="Base_Column_List" />
    from forum_order_data
    where del_flag = '1' and data_status = '1' and order_id = #{orderId,jdbcType=INTEGER}
  </select>

  <select id="queryByPage" resultMap="BaseResultVoMap" parameterType="com.jh.forum.bbs.vo.OrderDataVo" >
    select
    <include refid="Base_Column_List" />
    from forum_order_data
    where del_flag = '1' and data_status = '1'
    <if test="creator!=null">
        and creator = #{creator,jdbcType=INTEGER}
    </if>
    order by create_time desc
  </select>

  <select id="findByPageCms" resultMap="BaseResultMap" parameterType="com.jh.forum.bbs.entity.ForumOrderData" >
    select
    <include refid="Base_Column_List" />
    from forum_order_data
    where del_flag = '1' and data_status = '1'
    <!--<if test="regionId != null" >-->
      <!--AND region_id = #{regionId,jdbcType=BIGINT}-->
    <!--</if>-->

    <if test="regionCode != null">
      AND region_code like #{regionCode,jdbcType=VARCHAR}  ||'%'
    </if>
    <if test="crop != null and crop!=''">
      AND (crop like #{crop,jdbcType=VARCHAR}  ||',%' or crop like '%,'|| #{crop,jdbcType=VARCHAR}  ||',%' or crop like '%,'|| #{crop,jdbcType=VARCHAR})
    </if>
    <if test="accuracyRange != null and accuracyRange!=''" >
      AND accuracy_range = #{accuracyRange,jdbcType=VARCHAR}
    </if>
    <if test="dataShow != null" >
      AND data_show = #{dataShow,jdbcType=INTEGER}
    </if>
    <if test="startDate != null and endDate != null ">
      <![CDATA[ and create_time >= cast((#{startDate,jdbcType=DATE} || ' 00:00:00') as TIMESTAMP ) AND create_time <= cast((#{endDate,jdbcType=DATE} || ' 23:59:59') as TIMESTAMP )  ]]>
    </if>
      <if test="orderStatus != null and orderStatus!=''">
          AND order_status = #{orderStatus,jdbcType=VARCHAR}
      </if>
    ORDER BY
    <choose>
      <when test="sidx != null and sidx != ''">
        ${sidx} ${sord}
      </when>
      <otherwise>
        create_time DESC
      </otherwise>
    </choose>
  </select>

  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from forum_order_data
    where order_id = #{orderId,jdbcType=INTEGER}
  </delete>
  <insert id="insert" parameterType="com.jh.forum.bbs.entity.ForumOrderData" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into forum_order_data (order_id, data_status, del_flag, 
      create_time, creator_name, creator, 
      modify_time, modifier_name, modifier, 
      remark, region_id, crop, 
      accuracy_range, data_classify, start_date, 
      end_date, data_show, order_tel, 
      order_status)
    values (#{orderId,jdbcType=INTEGER}, #{dataStatus,jdbcType=CHAR}, #{delFlag,jdbcType=CHAR}, 
      #{createTime,jdbcType=DATE}, #{creatorName,jdbcType=VARCHAR}, #{creator,jdbcType=INTEGER}, 
      #{modifyTime,jdbcType=DATE}, #{modifierName,jdbcType=VARCHAR}, #{modifier,jdbcType=INTEGER}, 
      #{remark,jdbcType=VARCHAR}, #{regionId,jdbcType=BIGINT}, #{crop,jdbcType=VARCHAR},
      #{accuracyRange,jdbcType=VARCHAR}, #{dataClassify,jdbcType=VARCHAR}, #{startDate,jdbcType=DATE},
      #{endDate,jdbcType=DATE}, #{dataShow,jdbcType=INTEGER}, #{orderTel,jdbcType=CHAR}, 
      #{orderStatus,jdbcType=CHAR})
  </insert>
  <insert id="save" parameterType="com.jh.forum.bbs.entity.ForumOrderData" >
    insert into forum_order_data
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="createTime != null" >
        create_time,
      </if>
      <if test="creatorName != null" >
        creator_name,
      </if>
      <if test="creator != null" >
        creator,
      </if>
      <if test="remark != null" >
        remark,
      </if>
      <if test="regionId != null" >
        region_id,
      </if>
      <if test="regionCode != null">
        region_code,
      </if>
      <if test="crop != null" >
        crop,
      </if>
      <if test="accuracyRange != null" >
        accuracy_range,
      </if>
      <if test="dataClassify != null" >
        data_classify,
      </if>
      <if test="startDate != null" >
        start_date,
      </if>
      <if test="endDate != null" >
        end_date,
      </if>
      <if test="dataShow != null" >
        data_show,
      </if>
      <if test="orderTel != null" >
        order_tel,
      </if>
      <if test="orderStatus != null" >
        order_status,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >

      <if test="createTime != null" >
        #{createTime,jdbcType=DATE},
      </if>
      <if test="creatorName != null" >
        #{creatorName,jdbcType=VARCHAR},
      </if>
      <if test="creator != null" >
        #{creator,jdbcType=INTEGER},
      </if>

      <if test="remark != null" >
        #{remark,jdbcType=VARCHAR},
      </if>
      <if test="regionId != null" >
        #{regionId,jdbcType=BIGINT},
      </if>
      <if test="regionCode != null">
        #{regionCode,jdbcType=VARCHAR},
      </if>
      <if test="crop != null" >
        #{crop,jdbcType=VARCHAR},
      </if>
      <if test="accuracyRange != null" >
        #{accuracyRange,jdbcType=VARCHAR},
      </if>
      <if test="dataClassify != null" >
        #{dataClassify,jdbcType=INTEGER},
      </if>
      <if test="startDate != null" >
        #{startDate,jdbcType=DATE},
      </if>
      <if test="endDate != null" >
        #{endDate,jdbcType=DATE},
      </if>
      <if test="dataShow != null" >
        #{dataShow,jdbcType=INTEGER},
      </if>
      <if test="orderTel != null" >
        #{orderTel,jdbcType=CHAR},
      </if>
      <if test="orderStatus != null" >
        #{orderStatus,jdbcType=CHAR},
      </if>
    </trim>
  </insert>
  <update id="update" parameterType="com.jh.forum.bbs.entity.ForumOrderData" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update forum_order_data
    <set >
      <if test="dataStatus != null" >
        data_status = #{dataStatus,jdbcType=CHAR},
      </if>
      <if test="delFlag != null" >
        del_flag = #{delFlag,jdbcType=CHAR},
      </if>
      <if test="createTime != null" >
        create_time = #{createTime,jdbcType=DATE},
      </if>
      <if test="creatorName != null" >
        creator_name = #{creatorName,jdbcType=VARCHAR},
      </if>
      <if test="creator != null" >
        creator = #{creator,jdbcType=INTEGER},
      </if>
      <if test="modifyTime != null" >
        modify_time = #{modifyTime,jdbcType=DATE},
      </if>
      <if test="modifierName != null" >
        modifier_name = #{modifierName,jdbcType=VARCHAR},
      </if>
      <if test="modifier != null" >
        modifier = #{modifier,jdbcType=INTEGER},
      </if>
      <if test="remark != null" >
        remark = #{remark,jdbcType=VARCHAR},
      </if>
      <if test="regionId != null" >
        region_id = #{regionId,jdbcType=BIGINT},
      </if>
      <if test="crop != null" >
        crop = #{crop,jdbcType=VARCHAR},
      </if>
      <if test="accuracyRange != null" >
        accuracy_range = #{accuracyRange,jdbcType=VARCHAR},
      </if>
      <if test="dataClassify != null" >
        data_classify = #{dataClassify,jdbcType=VARCHAR},
      </if>
      <if test="startDate != null" >
        start_date = #{startDate,jdbcType=DATE},
      </if>
      <if test="endDate != null" >
        end_date = #{endDate,jdbcType=DATE},
      </if>
      <if test="dataShow != null" >
        data_show = #{dataShow,jdbcType=INTEGER},
      </if>
      <if test="orderTel != null" >
        order_tel = #{orderTel,jdbcType=CHAR},
      </if>
      <if test="orderStatus != null" >
        order_status = #{orderStatus,jdbcType=CHAR},
      </if>
    </set>
    where order_id = #{orderId,jdbcType=INTEGER}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.jh.forum.bbs.entity.ForumOrderData" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update forum_order_data
    set data_status = #{dataStatus,jdbcType=CHAR},
      del_flag = #{delFlag,jdbcType=CHAR},
      create_time = #{createTime,jdbcType=DATE},
      creator_name = #{creatorName,jdbcType=VARCHAR},
      creator = #{creator,jdbcType=INTEGER},
      modify_time = #{modifyTime,jdbcType=DATE},
      modifier_name = #{modifierName,jdbcType=VARCHAR},
      modifier = #{modifier,jdbcType=INTEGER},
      remark = #{remark,jdbcType=VARCHAR},
      region_id = #{regionId,jdbcType=BIGINT},
      crop = #{crop,jdbcType=VARCHAR},
      accuracy_range = #{accuracyRange,jdbcType=VARCHAR},
      data_classify = #{dataClassify,jdbcType=VARCHAR},
      start_date = #{startDate,jdbcType=DATE},
      end_date = #{endDate,jdbcType=DATE},
      data_show = #{dataShow,jdbcType=INTEGER},
      order_tel = #{orderTel,jdbcType=CHAR},
      order_status = #{orderStatus,jdbcType=CHAR}
    where order_id = #{orderId,jdbcType=INTEGER}
  </update>
</mapper>