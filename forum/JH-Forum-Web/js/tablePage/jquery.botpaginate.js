(function($){var Method={'default':function($container,pluginName,methodName){var opts=optHandle.get($container,pluginName);if(methodName=='default'){return pagingButton.init($container,pluginName,opts);}else{if(this[methodName]){return this[methodName]($container,pluginName,opts);}}},'getData':function($container,pluginName,opts){return opts;},'refresh':function($container,pluginName,opts){pagingButton.load($container,opts);},'refreshPageBtn':function($container,pluginName,opts){pagingButton.refreshPageBtn($container,opts);}};var pagingButton={'init':function($container,pluginName,opts){$container.addClass('botpaginate-containter');$container.append('<div class="botpaginate-box"></div>');this.action($container,pluginName);this.draw($container,opts);},'calculatePageLen':function(dataLen,displayDataLen){if(displayDataLen<=0||dataLen<=0){return 0;}else{var pageLen=parseInt(dataLen/displayDataLen);if(dataLen%displayDataLen!=0){pageLen++};return pageLen;}},'load':function($container,opts){this.draw($container,opts);this.numberButtons.change($botpaginate,opts,this);},'draw':function($container,opts){var $botpaginate=$container.children('.botpaginate-box');var newhtml='<span class="botpaginate-num-btn-group"></span>';if(opts.type=='full'||opts.type=='updown'){newhtml='<a class="botpaginate-btn prev-btn fa " title="上一页">上一页</a>'+newhtml
+'<a class="botpaginate-btn next-btn fa" title="下一页">下一页</a>';if(opts.type=='full'){newhtml='<a class="botpaginate-btn first-btn fa fa-step-backward" title="棣栭〉"></a>'
+newhtml+'<a class="botpaginate-btn last-btn fa fa-step-forward" title="灏鹃〉"></a>';}}
if(opts.visibleGo){newhtml+='<span class="go-page-box">跳转到<input type="text" class="go-page-input" /><a class="botpaginate-btn go-btn end-view-btn">GO</a></span>';}
$botpaginate.html(newhtml);},'numberButtons':{'change':function($botpaginate,opts,top){var pageData=opts.pageData;var currentPage=pageData.currentPage;var displayDataLen=pageData.displayDataLen;var dataLen=pageData.dataLen;var pageLen=top.calculatePageLen(dataLen,displayDataLen);var $numBtnsGroup=$botpaginate.find('.botpaginate-num-btn-group');this.draw($numBtnsGroup,currentPage,pageLen);try{$botpaginate.find('input[type="text"].go-page-input').val(currentPage);}catch(e){}
top.endViewBtn($botpaginate);top.disableButtons($botpaginate,pageLen,currentPage);top.isShow($botpaginate,pageLen);},'draw':function($numBtnsGroup,currentPage,pageLen){var newhtml='';if(currentPage<=0){var btnCount=1;for(var i=1;i<=pageLen;i++){if(btnCount>5)break;newhtml+='<a class="botpaginate-btn num-btn">'+i+'</a>';btnCount++;}}else if(currentPage>pageLen){var btnCount=1;for(var i=pageLen;i>0;i--){if(btnCount>5)break;newhtml+='<a class="botpaginate-btn num-btn">'+i+'</a>';btnCount++;}}else{newhtml='<a class="botpaginate-btn num-btn current-btn">'+currentPage+'</a>';var btnCount=1,startPage=currentPage-2,bigPage=currentPage,smallPage=currentPage;if(startPage<1)startPage=1;for(var i=currentPage-1;i>=startPage;i--){newhtml='<a class="botpaginate-btn num-btn">'+i+'</a>'+newhtml;smallPage--;btnCount++;}
while(btnCount<5){bigPage++;if(bigPage>pageLen)break;newhtml+='<a class="botpaginate-btn num-btn">'+bigPage+'</a>';btnCount++;}
while(btnCount<5){smallPage--;if(smallPage<1)break;newhtml='<a class="botpaginate-btn num-btn">'+smallPage+'</a>'+newhtml;btnCount++;}
if(bigPage<pageLen){if((bigPage+1)<pageLen){newhtml+='<span class="ellipsis">...</span>';}
newhtml+='<a class="botpaginate-btn num-btn">'+pageLen+'</a>';}}
$numBtnsGroup.html(newhtml);}},'endViewBtn':function($botpaginate){$botpaginate.find('.botpaginate-btn:not(.go-btn):last').addClass('end-view-btn');var $ellipsis=$botpaginate.find('.ellipsis');if($ellipsis.length=1){$ellipsis.prev().addClass('end-view-btn');}},'disableButtons':function($botpaginate,pageLen,currentPage){$botpaginate.find('.botpaginate-btn').removeClass('disabled-btn');if(currentPage<=1){$botpaginate.find('.first-btn,.prev-btn').addClass('disabled-btn');}
if(currentPage>=pageLen||pageLen<=0){$botpaginate.find('.last-btn,.next-btn').addClass('disabled-btn');}},'isShow':function($botpaginate,pageLen){if(pageLen<=1){$botpaginate.hide();}else{$botpaginate.show();}},'action':function($container,pluginName){var that=this;var $botpaginate=$container.children('.botpaginate-box');$botpaginate.on('click','.botpaginate-btn',function(){if($(this).hasClass('disabled-btn'))return false;var opt=optHandle.get($container,pluginName);var pageData=opt.pageData;var currentPage=pageData.currentPage;var pageLen=that.calculatePageLen(pageData.dataLen,pageData.displayDataLen);var goPage;if($(this).hasClass('last-btn')){goPage=pageLen;}else if($(this).hasClass('prev-btn')){goPage=currentPage-1;}else if($(this).hasClass('next-btn')){goPage=currentPage+1;}else if($(this).hasClass('num-btn')){goPage=parseInt($(this).text());}else if($(this).hasClass('go-btn')){goPage=parseInt($(this).prev('input[type=text].go-page-input').val());}else{goPage=1;}
if(goPage>0&&goPage<=pageLen){opt.pageBtnFun(goPage);}});},'refreshPageBtn':function($container,opts){var $botpaginate=$container.children('.botpaginate-box');this.numberButtons.change($botpaginate,opts,this);}};var optHandle={'get':function($obj,pluginName){return $obj.data(pluginName);},'set':function($obj,pluginName,opt){var nowOpt=$obj.data(pluginName);var newOpt;if(nowOpt){newOpt=$.extend(true,{},nowOpt,opt);}else{var defaultOpt=$.fn[pluginName].defaults;newOpt=$.extend(true,{},defaultOpt,opt);}
$obj.data(pluginName,newOpt);}}
$.fn.botpaginate=function(options,param){var pluginName='botpaginate';options=options||{};var r=[];this.each(function(){if(typeof options=='string'){if(Method[options]){if((typeof(param)=="object"&&Object.prototype.toString.call(param).toLowerCase()=="[object object]"&&!param.length)||param==undefined){optHandle.set($(this),pluginName,param);r.push(Method.default($(this),pluginName,options));}else{r.push(Method[options]($(this),pluginName,param));}}}else{optHandle.set($(this),pluginName,options);r.push(Method.default($(this),pluginName,'default'));}});if(r.length==1)r=r[0];return r;};$.fn.botpaginate.defaults={'visibleGo':false,'type':'numbers','pageData':{'currentPage':1,'dataLen':10,'displayDataLen':10},'pageBtnFun':function(){}};})(jQuery);